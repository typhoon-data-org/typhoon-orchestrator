
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.10">
    
    
      
        <title>Getting started - TYPHOON</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.1fe995fd.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@7.1.2/dist/mermaid.css">
    
    
      
  



  
  



  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-154972398-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="typhoon" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="TYPHOON" class="md-header__button md-logo" aria-label="TYPHOON" data-md-component="logo">
      
  <img src="img/typhoon_flat_icon_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TYPHOON
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting started
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/typhoon-data-org/typhoon-orchestrator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    typhoon-orchestrator
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="index.html" class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="getting-started/installation.html" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="examples/hello-world.html" class="md-tabs__link">
        Example Walkthroughs
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="usage/dag-context.html" class="md-tabs__link">
        Usage
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="TYPHOON" class="md-nav__button md-logo" aria-label="TYPHOON" data-md-component="logo">
      
  <img src="img/typhoon_flat_icon_white.png" alt="logo">

    </a>
    TYPHOON
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/typhoon-data-org/typhoon-orchestrator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    typhoon-orchestrator
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/hello-world.html" class="md-nav__link">
        Hello World
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/typhoon-cli.html" class="md-nav__link">
        Typhoon Cli
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/creating-a-dag.html" class="md-nav__link">
        Creating your DAG
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/connections.html" class="md-nav__link">
        Adding connections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/deployment.html" class="md-nav__link">
        Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/using-components.html" class="md-nav__link">
        Using Components
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/using-component-ui.html" class="md-nav__link">
        UI configurator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="getting-started/creating-hooks.html" class="md-nav__link">
        New Hooks (connections)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Example Walkthroughs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Example Walkthroughs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Example Walkthroughs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/hello-world.html" class="md-nav__link">
        Hello World
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/mysql-to-snowflake.html" class="md-nav__link">
        MySql to Snowflake
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/pandas-examples.html" class="md-nav__link">
        Pandas automation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Usage
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/dag-context.html" class="md-nav__link">
        Dag Context
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/py-multistep.html" class="md-nav__link">
        !Py & !Multistep
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/task-flow-control.html" class="md-nav__link">
        Task flow control
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/task-testing.html" class="md-nav__link">
        Task testing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/functions.html" class="md-nav__link">
        Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/transformations.html" class="md-nav__link">
        Transformations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/components.html" class="md-nav__link">
        Components
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/hooks.html" class="md-nav__link">
        Hooks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="usage/templates.html" class="md-nav__link">
        Variables & Templates
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-project" class="md-nav__link">
    New project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checking-status" class="md-nav__link">
    Checking status
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connections" class="md-nav__link">
    Connections
  </a>
  
    <nav class="md-nav" aria-label="Connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connections-yaml" class="md-nav__link">
    Connections YAML
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-connection" class="md-nav__link">
    Adding the connection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dag" class="md-nav__link">
    DAG
  </a>
  
    <nav class="md-nav" aria-label="DAG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dag-code" class="md-nav__link">
    DAG code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-dag" class="md-nav__link">
    Running the DAG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="getting-started">Getting started</h1>
<p>To install typhoon for development do</p>
<div class="highlight"><pre><span></span><code>pip install typhoon-orchestrator<span class="o">[</span>dev<span class="o">]</span>
</code></pre></div>
<p>You always want the DEV version when installing it locally since it comes will all the libraries and tools that make development easier.</p>
<div class="admonition error">
<p class="admonition-title">Don't install the basic version</p>
<p>The basic version that you would get with <code>pip install typhoon-orchestrator</code> is the lightweight version that runs inside lambda in production because it is much more light-weight.</p>
</div>
<h2 id="new-project">New project</h2>
<p>Inside your terminal run:</p>
<div class="highlight"><pre><span></span><code>typhoon init hello_world
<span class="nb">cd</span> hello_world
</code></pre></div>
<p>This will create a directory named hello_world that serves as an example project. As in git, when we cd into the directory it will detect that it's a Typhoon project and consider that directory the base directory for Typhoon (TYPHOON_HOME).</p>
<h2 id="checking-status">Checking status</h2>
<p>As in git, one of the most important commands is status. It gives us information about the state of the project as well as tips on how to fix problems or warnings.</p>
<div class="highlight"><pre><span></span><code>typhoon status
</code></pre></div>
<p>Result:
<div class="highlight"><pre><span></span><code> _________  __  __   ______   ___   ___   ______   ______   ___   __
/________/\/_/\/_/\ /_____/\ /__/\ /__/\ /_____/\ /_____/\ /__/\ /__/\
\__.::.__\/\ \ \ \ \\:::_ \ \\::\ \\  \ \\:::_ \ \\:::_ \ \\::\_\\  \ \
   \::\ \   \:\_\ \ \\:(_) \ \\::\/_\ .\ \\:\ \ \ \\:\ \ \ \\:. `-\  \ \
    \::\ \   \::::_\/ \: ___\/ \:: ___::\ \\:\ \ \ \\:\ \ \ \\:. _    \ \
     \::\ \    \::\ \  \ \ \    \: \ \\::\ \\:\_\ \ \\:\_\ \ \\. \`-\  \ \
      \__\/     \__\/   \_\/     \__\/ \::\/ \_____\/ \_____\/ \__\/ \__\/

• Typhoon home defined as /Users/biellls/Desktop/typhoon/hello_world
• Metadata database found in sqlite:/Users/biellls/Desktop/typhoon/hello_world/hello_world.db
• Found connections in YAML that are not defined in the metadata database
   - Connection data_lake is not set. Try typhoon connection add --conn-id data_lake --conn-env CONN_ENV
• Found connections in DAGs that are not defined in the metadata database
   - Connection data_lake is not set. Try typhoon connection add --conn-id data_lake --conn-env CONN_ENV
• All variables in the DAGs are defined in the database
• DAGs up to date
</code></pre></div></p>
<p>We can see that it's detecting the project home as well as a SQLite metadata database that just got created. It's also warning us that our DAG uses a connection that is not defined in the metadata database and suggesting us a fix.</p>
<div class="admonition tip">
<p class="admonition-title">Bash/ZSH complete</p>
<p>To get bash complete for the project run <code>eval "$(_TYPHOON_COMPLETE=source typhoon)"</code> and add that into <code>~/.bashrc</code>. For zsh run <code>eval "$(_TYPHOON_COMPLETE=source_zsh typhoon)"</code> and add that into <code>~/.zshrc</code></p>
</div>
<h2 id="connections">Connections</h2>
<h3 id="connections-yaml">Connections YAML</h3>
<p>During development we may want to use different connections to test our DAGs. For example we may start development writing to a local file and after that is working correctly switch the connection to S3 to finish testing. We may also want to keep the production connection details somewhere handy.</p>
<p>For this specific purpose there is a file called <code>connections.yml</code> in our project where we will define all our connection details. Furthermore, for one connection name we can define different connection environments, each with their own connection. For example in this project we will write data using a connection called <code>data_lake</code> which has two connection environments, <code>local</code> which writes to a local file and <code>test</code> which writes to S3. It is possible to use them interchangeably since they both implement the same interface: <code>FileSystemHook</code>.</p>
<p><strong>connections.yml:</strong>
<div class="highlight"><pre><span></span><code><span class="nt">data_lake</span><span class="p">:</span>
  <span class="nt">test</span><span class="p">:</span>
    <span class="nt">conn_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">extra</span><span class="p">:</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-typhoon-test-bucket</span>

  <span class="nt">local</span><span class="p">:</span>
    <span class="nt">conn_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">local_storage</span>
    <span class="nt">extra</span><span class="p">:</span>
      <span class="nt">base_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/data_lake/</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">connections.yml is not versioned</p>
<p>The <code>connections.yml</code> file may contain passwords so it should never be versioned. That is why it's included in the <code>.gitignore</code> file for projects generated with the CLI.</p>
</div>
<h3 id="adding-the-connection">Adding the connection</h3>
<p>Following the advice we got from the <code>typhoon status command</code> we will now add the connection to the metadata database. We will add the local data_lake connection with the command:</p>
<div class="highlight"><pre><span></span><code>typhoon connection add --conn-id data_lake --conn-env <span class="nb">local</span>
<span class="c1"># Check that it was added</span>
typhoon connection ls -l
</code></pre></div>
<p>If we run the status command again we will see that everything is ok in our project now:</p>
<div class="highlight"><pre><span></span><code>typhoon status
</code></pre></div>
<div class="highlight"><pre><span></span><code> _________  __  __   ______   ___   ___   ______   ______   ___   __
/________/\/_/\/_/\ /_____/\ /__/\ /__/\ /_____/\ /_____/\ /__/\ /__/\
\__.::.__\/\ \ \ \ \\:::_ \ \\::\ \\  \ \\:::_ \ \\:::_ \ \\::\_\\  \ \
   \::\ \   \:\_\ \ \\:(_) \ \\::\/_\ .\ \\:\ \ \ \\:\ \ \ \\:. `-\  \ \
    \::\ \   \::::_\/ \: ___\/ \:: ___::\ \\:\ \ \ \\:\ \ \ \\:. _    \ \
     \::\ \    \::\ \  \ \ \    \: \ \\::\ \\:\_\ \ \\:\_\ \ \\. \`-\  \ \
      \__\/     \__\/   \_\/     \__\/ \::\/ \_____\/ \_____\/ \__\/ \__\/

• Typhoon home defined as /Users/biellls/Desktop/typhoon/hello_world
• Metadata database found in sqlite:/Users/biellls/Desktop/typhoon/hello_world/hello_world.db
• All connections in YAML are defined in the database
• All connections in the DAGs are defined in the database
• All variables in the DAGs are defined in the database
• DAGs up to date
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Use bash complete</p>
<p>Typhoon CLI has intelligent completion for a lot of commands and arguments so make sure to hit TAB whenever you want some help. It can suggest connection IDs and connection environments from the <code>connections.yml</code> file.</p>
</div>
<h2 id="dag">DAG</h2>
<h3 id="dag-code">DAG code</h3>
<p>We can check an example DAG in <code>dags/hello_world.yml</code>. You can also check it with the CLI by running <code>typhoon dag definition --dag-name hello_world</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To get some editor completion and hints you can configure the JSON schema in <code>dag_schema.json</code> as the schema for the DAG YAML file. This can be done in VS Code with the <a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml">Red Hat YAML extension</a> or in <a href="https://www.jetbrains.com/help/pycharm/json.html">PyCharm natively</a>.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hello_world</span>
<span class="nt">schedule_interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rate(10 minutes)</span>   <span class="c1"># Can also be a cron expression or a string such as &quot;@daily&quot;</span>

<span class="nt">nodes</span><span class="p">:</span>
  <span class="nt">send_data</span><span class="p">:</span>
    <span class="nt">function</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">typhoon.flow_control.branch</span>   <span class="c1"># Yields a batch for each item in branches</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">branches</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;users.txt&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;John,</span><span class="nv"> </span><span class="s">Amy,</span><span class="nv"> </span><span class="s">Adam,</span><span class="nv"> </span><span class="s">Jane&#39;</span><span class="p p-Indicator">]</span>
        <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;animals.txt&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;dog,</span><span class="nv"> </span><span class="s">cat,</span><span class="nv"> </span><span class="s">mouse,</span><span class="nv"> </span><span class="s">elephant,</span><span class="nv"> </span><span class="s">giraffe&#39;</span><span class="p p-Indicator">]</span>
        <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;fruits.csv&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;apple,pear,apricot&#39;</span><span class="p p-Indicator">]</span>

  <span class="nt">write_data</span><span class="p">:</span>
    <span class="nt">function</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">typhoon.filesystem.write_data</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">conn_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$HOOK.data_lake</span>


<span class="nt">edges</span><span class="p">:</span>
  <span class="nt">e1</span><span class="p">:</span>
    <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">send_data</span>
    <span class="nt">adapter</span><span class="p">:</span>
      <span class="nt">data =&gt; APPLY</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">transformations.data.to_bytes_buffer($BATCH[1])</span>
      <span class="nt">path =&gt; APPLY</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">f&#39;/store/{$BATCH[0]}&#39;</span>
    <span class="nt">destination</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">write_data</span>
</code></pre></div>
<p>This DAG has three branches, each with a file name and a string and for each branch it will write the string data into that file</p>
<div class="admonition info">
<p class="admonition-title">Skim the code</p>
<p>Don't get caught up on the details, we will explain how to create your own DAGs in the following section.</p>
</div>
<h3 id="running-the-dag">Running the DAG</h3>
<p>We can run this with:</p>
<div class="highlight"><pre><span></span><code>typhoon dag run --dag-name hello_world
</code></pre></div>
<p>We can check the files that have been written to <code>/tmp/data_lake/store/</code> where <code>/tmp/data_lake/</code> was the base directory defined for our connection (go back to <code>connections.yml</code> to check) and the DAG wrote to <code>/store/[FILE_NAME]</code>.</p>
<p>The file name was the first item of the list in each batch (eg: the first batch is the list <code>['users.txt', 'John, Amy, Adam, Jane']</code>) and the second item of the list are the contents that were written to that file.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.ddd52ceb.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
      
    
  </body>
</html>